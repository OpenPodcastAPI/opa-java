= Subscriptions endpoint
:doctype: book
:sectlinks:

The `subscriptions` endpoint exposes operations taken on subscriptions. A subscriptionEntity represents two things:

1. A podcast feed
2. The relationship between a user and a podcast feed

[[actions-subscriptions]]
== Actions

[source,httprequest]
----
POST /api/v1/users
----

[[actions-subscriptions-create]]
=== Create subscriptions

When a user adds a subscriptionEntity to the system, a corresponding `subscriptionEntity` object is fetched or created depending on whether a matching subscriptionEntity is present. A link is then created between the user and the subscriptionEntity.

operation::subscriptions-bulk-create-mixed[snippets='request-fields,curl-request,response-fields,http-response']

==== Responses

If all feeds are valid and no problems are encountered, the server responds with an array of `success` objects and an empty array of `failure` objects.

include::{snippets}/subscriptions-bulk-create-success/http-response.adoc[]

If all feeds are invalid or none could be persisted, the server responds with an array of `failure` objects and an empty array of `success` objects.

include::{snippets}/subscriptions-bulk-create-failure/http-response.adoc[]

If the server receives a mix of responses, both arrays are populated.

include::{snippets}/subscriptions-bulk-create-mixed/http-response.adoc[]

[[actions-subscriptions-list]]
=== List subscriptions

When a user fetches a list of subscriptions, their own subscriptions are returned. The subscriptions of other users are not returned.

operation::subscriptions-list[snippets='query-parameters,curl-request,response-fields,http-response']

==== Include unsubscribed

operation::subscriptions-list-with-unsubscribed[snippets='curl-request,http-response']

[[actions-subscriptionEntity-fetch]]
=== Fetch a single subscriptionEntity

Returns the details of a single subscriptionEntity for the  authenticated user. Returns `404` if the user has no subscriptionEntity entry for the feed in question.

operation::subscriptionEntity-get[snippets='path-parameters,curl-request,response-fields,http-response']

[[actions-subscriptionEntity-update]]
=== Unsubscribe from a feed

Unsubscribes the authenticated user from a feed. This action updates the user subscriptionEntity record to mark the subscriptionEntity as inactive. It does not delete the subscriptionEntity record.

operation::subscriptionEntity-unsubscribe[snippets='path-parameters,curl-request,response-fields,http-response']
